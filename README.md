## Installation
First, Install NixOS

See [vimjoyer's guide](https://youtu.be/a67Sv4Mbxmc?si=49mqSaMg0ayrK5fF) if you are new to NixOS, or [Why Does Nothing Work's guide](https://youtu.be/63sSGuclBn0?si=WdAuKiwzDZJWmqgV) if this is your first time installing an OS. Note that you will need to disable Secure Boot (it is possible to boot NixOS with Secure Boot, but I haven't learned how yet).

Authenticate with GitHub so you can clone the repo.
```
ssh-keygen -t ed25519 -C "your_email@example.com" # generate an ssh key pair
ssh-add ~/.ssh/id_ed25519 # add the key to the ssh agent for ease of use
cat ~/.ssh/id_ed25519.pub # display the public key
```

Go to github.com in the default browser and log in.
Navigate to **Settings > SSH and GPG keys** and add your new key.

Now move the autogenerated nix files into a directory just for your machine. I call my development machine erebus.
```
cd /etc/nixos/
sudo chmod -R 777 .
mkdir ~/erebus/
mv -t ~/erebus/ configuration.nix hardware-configuration.nix
```

Download the repo.
```
cd /etc/nixos/
nix-shell -p git # this opens a shell with git installed, without installing git anywhere else (the package will live in the nix store until it gets garbage collected)
git clone git@github.com:dane-berg/my_nixos.git
```

Now update the configuration.
```
mv ~/erebus hosts/

nano flake.nix # create a new host; update the username, system, and path to configuration.nix.

nano hosts/erebus/configuration.nix # import the core module, set the host name, and delete things already managed by modules
```
```diff
  imports = [
    ./hardware-configuration.nix
+   ../../modules/core.nix
  ];

- networking.hostName = "nixos";
+ networking.hostName = "erebus";

- users.users.daneb = {
-   isNormalUser = true;
-   ...
- }
-
- programs.firefox.enable = true;
```

Add your changes and rebuild your system.
```
git add .
sudo nixos-rebuild switch --flake /etc/nixos#erebus
```

Now setup a git repository to track your changes. Use the rebuild script to make edits, format your changes, rebuild your system, and commit the result all in a single command.
```
nixrb erebus/configuration.nix modules/home.nix # list any files you want to edit before rebuilding
```

You should experiment with importing additional modules and changing settings as you desire.

Enjoy the last system you will ever configure!
